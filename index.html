<!DOCTYPE html>
<html>
    <head>
        <title>Autorouting App</title>
        <link rel="stylesheet" href="style.css" />
        <meta charset="utf-8" />
    </head>
    <body>
        <div id="google_translate_element"></div>
        <form action="output.html" target="_blank">
            <toptitle><b>Autorouting</b></toptitle>
            <br />
            Research Triangle Area, NC
            <br />
            <br />
            <button type="button" id="collapsible" onclick="toggle();">Instruction Video</button>
            <br /><a href="usageguide.pdf">Or read instructions</a>
            <br />
            <p>To avoid confusion, please specify the city and state of every address.</p>
            <br />
            <!--<label for="api_key">Google Geocoding API key</label>
            <input type="password" id="api_key" name="api_key" placeholder="API key" required>-->
            <label for="restaurant">Starting address</label>
            <input type="text" id="restaurant" name="restaurant" placeholder="Starting address" required>
            <label for="intermediate">Intermediate addresses (one address per line, fifty lines max)</label>
            <textarea name="consumer" id="consumer" placeholder="Intermediate addresses" required></textarea>
            <label for="driver">Ending address</label>
            <input type="text" id="driver" name="driver" placeholder="Ending address" required>
            <label for="user_email">Your Email (Optional)  We'll use this to send you your results.</label>
            <input type="email" id="user_email" name="user_email" placeholder="me@example.com">
            <input type="submit" value="Launch program">
        </form>
        <div id="content">
            <br />
            <video class="tab" height="500px" controls>Your browser does not support the &lt;video&gt; tag.
                <source src="routing.mp4"/>
            </video>
        </div>
        <script src="https://formspree.io/js/formbutton-v1.min.js" defer></script>
        <script src="globaljs.js"></script>
        <script>
			function toggle(){
				var content = document.getElementById("content");
				var collapsible = document.getElementById("collapsible");
				if (content.style.display === "block") {
					content.style.display = "none";
					collapsible.innerHTML = "Instruction Video";
                    document.querySelector("video").pause();
                    document.querySelector("video").removeEventListener("blur", function() {
                        document.querySelector("video").focus();
                    });
					
				} else {
					content.style.display = "block";
                    collapsible.blur();
					document.querySelector("video").focus();
                    document.querySelector("video").play();
                    document.querySelector("video").addEventListener("blur", function() {
                        document.querySelector("video").focus();
                    });
                    
                    var greywall = document.createElement("div");
                    greywall.style.backgroundColor = "#141414";
                    greywall.style.opacity = "0.75";
                    greywall.style.width = "100%";
                    greywall.style.height = "100%";
                    greywall.style.position = "fixed";
                    greywall.style.top = "0";
                    greywall.style.left = "0";
                    greywall.style.zIndex = "500";
                    document.body.appendChild(greywall);
                    greywall.addEventListener("click", function() { toggle(); this.remove(); });
				}
			}
            document.getElementsByTagName("textarea")[0].onkeyup = function() {
                this.value = this.value.split("\n").slice(0, 50).join("\n");
            };
            window.addEventListener("load", function() {
                document.querySelector("textarea").style.height = "0";
                while (document.body.scrollHeight < window.innerHeight - 15) {
                    document.querySelector("textarea").style.height = (parseFloat(document.querySelector("textarea").style.height) + 1).toString() + "px";
                }
            });
        </script>
        <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    </body>
</html>
